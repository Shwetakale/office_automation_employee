%nav.navbar.navbar-inverse.navbar-static-top
  .container-fluid
    .navbar-header
      %button{ class: "navbar-toggle", "data-toggle" => "collapse", "data-target" => "#navcollapse" }
        %span{ class: "icon-bar" }
        %span{ class: "icon-bar" }
        %span{ class: "icon-bar" }

      - if signed_in?
        - if can? :manage, OfficeAutomationEmployee::Company
          = link_to content_tag(:span, "", class: "glyphicon glyphicon-home") + content_tag(:strong, " Office Automation"), main_app.root_path, class: "navbar-brand"
        
        - else  
          = link_to content_tag(:span, "", class: "glyphicon glyphicon-home") + content_tag(:strong, " #{current_user.company.name.humanize}"), main_app.root_path, class: "navbar-brand"
      
    .collapse.navbar-collapse.navbar-right#navcollapse
      %ul.nav.navbar-nav
        - if signed_in?
          - unless can? :manage, OfficeAutomationEmployee::Company
            %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-list-alt") + "  Employees", office_automation_employee.company_users_path(current_user.company) if signed_in?

            - if can? :edit, OfficeAutomationEmployee::Company
              %li.dropdown
                = link_to content_tag(:span, "", class: "glyphicon glyphicon-cog") + " #{current_user.company.name} admin" + content_tag(:b, "", class: "caret"), "#", class: "dropdown-toggle", data: { toggle: "dropdown" }

                %ul.dropdown-menu.pull-right
                  %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-wrench") + " Company Profile", office_automation_employee.edit_company_path(current_user.company)

                  %li.divider

                  %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-earphone") + " Invite Users", office_automation_employee.new_user_invitation_path

              %li.dropdown
            
          %li.dropdown
            = link_to image_tag(current_user.image.small) + content_tag(:b, "", class: "caret"), "#", class: "data-toggle", data: { toggle: "dropdown" }

            %ul.dropdown-menu.pull-right
              - unless can? :manage, OfficeAutomationEmployee::Company
                %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-edit") + " Profile", office_automation_employee.edit_company_user_path(current_user.company, current_user)

                %li.divider

              %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-log-out") + " Sign Out", office_automation_employee.destroy_user_session_path, method: :delete

    = render "layouts/office_automation_employee/notification"
