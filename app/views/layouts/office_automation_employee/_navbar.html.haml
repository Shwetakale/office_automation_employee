%nav.navbar.navbar-inverse.navbar-static-top
  .container-fluid
    .navbar-header
      %button{ class: "navbar-toggle", "data-toggle" => "collapse", "data-target" => "#navcollapse" }
        %span{ class: "icon-bar" }
        %span{ class: "icon-bar" }
        %span{ class: "icon-bar" }

      = link_to content_tag(:span, "", class: "glyphicon glyphicon-home") + content_tag(:strong, " Office Automation"), main_app.root_path, class: "navbar-brand"

    .collapse.navbar-collapse#navcollapse
      %ul.nav.navbar-nav.pull-right
        %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-list-alt") + "  Employees", office_automation_employee.company_users_path(current_user.company) if signed_in?

        - if signed_in? and can? :manage, current_user
          %li.dropdown
            = link_to content_tag(:span, "", class: "glyphicon glyphicon-cog") + " #{current_user.company.name} tasks" + content_tag(:b, "", class: "caret"), "#", class: "dropdown-toggle", data: { toggle: "dropdown" }

            %ul.dropdown-menu.pull-right
              %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-earphone") + " Invite Users", office_automation_employee.new_user_invitation_path

        - if signed_in?
          %li.dropdown
            = link_to content_tag(:span, "", class: "glyphicon glyphicon-user") + " #{current_user.email}" + content_tag(:b, "", class: "caret"), "#", class: "data-toggle", data: { toggle: "dropdown" }

            %ul.dropdown-menu.pull-right
              %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-edit") + " Profile", office_automation_employee.edit_company_user_path(current_user.company, current_user)

              %li.divider

              %li= link_to content_tag(:span, "", class: "glyphicon glyphicon-log-out") + " Sign Out", office_automation_employee.destroy_user_session_path, method: :delete
